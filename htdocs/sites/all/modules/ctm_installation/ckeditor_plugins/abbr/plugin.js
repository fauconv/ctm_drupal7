
(function(){CKEDITOR.plugins.add("abbr",{init:function(a){a.addCommand("abbrDialog",new CKEDITOR.dialogCommand("abbrDialog"));a.ui.addButton("Abbr",{label:"Insert Abbreviation",command:"abbrDialog",icon:this.path+"images/icon.png"});if(a.contextMenu){a.addMenuGroup("myGroup");a.addMenuItem("abbrItem",{label:"Edit Abbreviation",icon:this.path+"images/icon.png",command:"abbrDialog",group:"myGroup"});a.contextMenu.addListener(function(b){if(b){b=b.getAscendant("abbr",true)}if(b&&!b.isReadOnly()&&!b.data("cke-realelement")){return{abbrItem:CKEDITOR.TRISTATE_OFF}}return null})}CKEDITOR.dialog.add("abbrDialog",function(b){return{title:"Abbreviation Properties",minWidth:400,minHeight:200,contents:[{id:"tab1",label:"Basic Settings",elements:[{type:"text",id:"abbr",label:"Abbreviation",validate:CKEDITOR.dialog.validate.notEmpty("Abbreviation field cannot be empty"),setup:function(c){this.setValue(c.getText())},commit:function(c){c.setText(this.getValue())}},{type:"text",id:"title",label:"Explanation",validate:CKEDITOR.dialog.validate.notEmpty("Explanation field cannot be empty"),setup:function(c){this.setValue(c.getAttribute("title"))},commit:function(c){c.setAttribute("title",this.getValue())}}]},{id:"tab2",label:"Advanced Settings",elements:[{type:"text",id:"id",label:"Id",setup:function(c){this.setValue(c.getAttribute("id"))},commit:function(c){var d=this.getValue();if(d){c.setAttribute("id",d)}else{if(!this.insertMode){c.removeAttribute("id")}}}}]}],onShow:function(){var d=b.getSelection(),c=d.getStartElement();if(c){c=c.getAscendant("abbr",true)}if(!c||c.getName()!="abbr"||c.data("cke-realelement")){c=b.document.createElement("abbr");this.insertMode=true}else{this.insertMode=false}this.element=c;this.setupContent(this.element)},onOk:function(){var d=this,c=this.element;if(this.insertMode){b.insertElement(c)}this.commitContent(c)}}})}})})();